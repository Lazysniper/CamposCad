<!DOCTYPE html>
<html lang="pt-PT">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="noindex, nofollow" />
    <title>Importar CSV - Campos Cadilhe</title>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              brand: '#345d9a',
              brandLight: '#5b86d6',
              brandHover: '#2b4f7a',
              canvas: '#fbfbfc',
              surface: '#f1f3f5',
              band: '#f4f6f8',
              textDark: '#0b1220',
              textMuted: '#3d4a5c',   // Darkened for better contrast (WCAG AA compliant)
              borderSoft: '#e6e9ed',
              badgeBg: '#eaf1ff',
              badgeText: '#345d9a',
            },
          },
        },
      };
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="min-h-screen bg-canvas text-textDark">
    <div class="bg-band">
      <div class="mx-auto max-w-4xl px-6 py-12 text-center">
        <h1 class="text-3xl font-semibold text-textDark">
          Importar registos CSV
        </h1>
        <p class="mt-3 text-sm text-textMuted">
          Carregue um ficheiro separado por ponto e vÃ­rgula para atualizar a coleÃ§Ã£o
          <span class="font-semibold text-brand">Cadilhes.Locales</span>.
        </p>
      </div>
    </div>

    <section
      class="mx-auto mt-10 max-w-3xl rounded-2xl border border-borderSoft bg-surface p-8 shadow-sm"
    >
      <form
        action="/upload"
        method="POST"
        enctype="multipart/form-data"
        class="flex flex-col gap-6"
      >
        <div>
          <label
            for="csvFile"
            class="block text-sm font-semibold text-textMuted"
            >Ficheiro CSV</label
          >
          <input
            id="csvFile"
            type="file"
            name="csvFile"
            accept=".csv"
            required
            class="mt-1 w-full rounded-lg border border-borderSoft bg-white px-3 py-3 text-textDark shadow-sm focus:outline-none focus:ring-2 focus:ring-brandLight focus:border-brandLight"
          />
          <p class="mt-2 text-xs text-textMuted">
            Estrutura esperada:
            <span class="font-semibold text-textDark">CP;LOCALIDADE;GIRO;CENTRO;SABADO</span>
          </p>
          <p class="mt-1 text-xs text-textMuted">
            Exemplo: <span class="font-mono">1000-001;Lisboa;Lisboa 2;;S</span>
          </p>
        </div>

        <button
          type="submit"
          class="inline-flex items-center justify-center gap-2 rounded-lg bg-brand px-6 py-3 text-white font-semibold shadow-sm transition hover:bg-brandHover"
        >
          Carregar e importar
        </button>
      </form>

      <% if (message) { %>
      <div
        class="mt-6 rounded-xl border border-[#d5e4ff] bg-white px-6 py-4 text-brand"
      >
        <p class="font-semibold">Sucesso</p>
        <p class="mt-1 text-sm"><%= message %></p>
      </div>
      <% } %>

      <% if (error) { %>
      <div
        class="mt-6 rounded-xl border border-rose-200 bg-[#fff1f3] px-6 py-4 text-rose-700"
      >
        <p class="font-semibold">Erro ao carregar</p>
        <p class="mt-1 text-sm"><%= error %></p>
      </div>
      <% } %>
    </section>

    <div class="mt-10 text-center">
      <a
        href="/search"
        class="inline-flex items-center gap-2 rounded-lg border border-[#e6eefc] bg-white px-4 py-2 text-sm font-semibold text-brand transition hover:bg-[#f7f9ff]"
      >
        <span aria-hidden="true">ðŸ”Ž</span>
        Pesquisa por CÃ³digo Postal
      </a>
    </div>
  </body>
</html>

